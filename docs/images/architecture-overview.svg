<svg xmlns="http://www.w3.org/2000/svg" width="1200" height="800" viewBox="0 0 1200 800" role="img" aria-label="Moltbot High-Level System Architecture">
  <defs>
    <style>
      .bg { fill: #fafbfc; }
      .box-primary { fill: #fff; stroke: #3b82f6; stroke-width: 2; }
      .box-secondary { fill: #f8fafc; stroke: #64748b; stroke-width: 1.5; }
      .box-gateway { fill: #fef3c7; stroke: #d97706; stroke-width: 2; }
      .box-channel { fill: #dbeafe; stroke: #2563eb; stroke-width: 1.5; }
      .box-agent { fill: #dcfce7; stroke: #16a34a; stroke-width: 2; }
      .box-storage { fill: #fce7f3; stroke: #db2777; stroke-width: 1.5; }
      .box-external { fill: #e0e7ff; stroke: #4f46e5; stroke-width: 1.5; }
      .title { font: bold 28px "Inter", "SF Pro Display", -apple-system, sans-serif; fill: #0f172a; }
      .subtitle { font: 14px "Inter", "SF Pro Text", -apple-system, sans-serif; fill: #64748b; }
      .heading { font: bold 16px "Inter", "SF Pro Text", -apple-system, sans-serif; fill: #1e293b; }
      .label { font: 13px "Inter", "SF Pro Text", -apple-system, sans-serif; fill: #475569; }
      .small { font: 11px "Inter", "SF Pro Text", -apple-system, sans-serif; fill: #64748b; }
      .arrow { stroke: #94a3b8; stroke-width: 2; fill: none; marker-end: url(#arrowhead); }
      .arrow-data { stroke: #3b82f6; stroke-width: 2; fill: none; marker-end: url(#arrowhead-blue); stroke-dasharray: 6,4; }
      .line-group { stroke: #e2e8f0; stroke-width: 1; stroke-dasharray: 4,4; fill: none; }
    </style>
    <marker id="arrowhead" markerWidth="10" markerHeight="8" refX="9" refY="4" orient="auto">
      <polygon points="0,0 10,4 0,8" fill="#94a3b8" />
    </marker>
    <marker id="arrowhead-blue" markerWidth="10" markerHeight="8" refX="9" refY="4" orient="auto">
      <polygon points="0,0 10,4 0,8" fill="#3b82f6" />
    </marker>
    <filter id="shadow" x="-10%" y="-10%" width="120%" height="130%">
      <feDropShadow dx="0" dy="2" stdDeviation="4" flood-opacity="0.08"/>
    </filter>
  </defs>

  <!-- Background -->
  <rect class="bg" width="1200" height="800" />

  <!-- Title -->
  <text class="title" x="40" y="50">Moltbot System Architecture</text>
  <text class="subtitle" x="40" y="72">Multi-channel messaging gateway with AI agent integration</text>

  <!-- External Clients Group (Left) -->
  <rect x="30" y="100" width="200" height="280" rx="12" fill="none" class="line-group" />
  <text class="small" x="40" y="118">CLIENTS</text>

  <rect class="box-external" x="50" y="135" width="160" height="50" rx="8" filter="url(#shadow)" />
  <text class="heading" x="130" y="160" text-anchor="middle">CLI</text>
  <text class="small" x="130" y="175" text-anchor="middle">moltbot commands</text>

  <rect class="box-external" x="50" y="200" width="160" height="50" rx="8" filter="url(#shadow)" />
  <text class="heading" x="130" y="225" text-anchor="middle">Web UI</text>
  <text class="small" x="130" y="240" text-anchor="middle">Control panel</text>

  <rect class="box-external" x="50" y="265" width="160" height="50" rx="8" filter="url(#shadow)" />
  <text class="heading" x="130" y="290" text-anchor="middle">Mobile Apps</text>
  <text class="small" x="130" y="305" text-anchor="middle">iOS / Android</text>

  <rect class="box-external" x="50" y="330" width="160" height="50" rx="8" filter="url(#shadow)" />
  <text class="heading" x="130" y="355" text-anchor="middle">macOS App</text>
  <text class="small" x="130" y="370" text-anchor="middle">Menubar gateway</text>

  <!-- Gateway (Center) -->
  <rect class="box-gateway" x="300" y="130" width="280" height="340" rx="16" filter="url(#shadow)" />
  <text class="heading" x="440" y="160" text-anchor="middle">Gateway Server</text>
  <text class="small" x="440" y="178" text-anchor="middle">Central RPC orchestrator</text>

  <rect class="box-secondary" x="320" y="195" width="240" height="40" rx="6" />
  <text class="label" x="440" y="220" text-anchor="middle">HTTP/WebSocket Server (Hono)</text>

  <rect class="box-secondary" x="320" y="245" width="240" height="40" rx="6" />
  <text class="label" x="440" y="270" text-anchor="middle">RPC Method Handlers</text>

  <rect class="box-secondary" x="320" y="295" width="115" height="40" rx="6" />
  <text class="label" x="378" y="320" text-anchor="middle">Auth</text>

  <rect class="box-secondary" x="445" y="295" width="115" height="40" rx="6" />
  <text class="label" x="502" y="320" text-anchor="middle">Sessions</text>

  <rect class="box-secondary" x="320" y="345" width="115" height="40" rx="6" />
  <text class="label" x="378" y="370" text-anchor="middle">Channels</text>

  <rect class="box-secondary" x="445" y="345" width="115" height="40" rx="6" />
  <text class="label" x="502" y="370" text-anchor="middle">Cron Jobs</text>

  <rect class="box-secondary" x="320" y="395" width="240" height="40" rx="6" />
  <text class="label" x="440" y="420" text-anchor="middle">Plugin Registry</text>

  <!-- Channel Plugins (Right) -->
  <rect x="640" y="100" width="240" height="370" rx="12" fill="none" class="line-group" />
  <text class="small" x="650" y="118">CHANNEL PLUGINS</text>

  <rect class="box-channel" x="660" y="135" width="100" height="45" rx="6" filter="url(#shadow)" />
  <text class="label" x="710" y="162" text-anchor="middle">Telegram</text>

  <rect class="box-channel" x="770" y="135" width="100" height="45" rx="6" filter="url(#shadow)" />
  <text class="label" x="820" y="162" text-anchor="middle">Discord</text>

  <rect class="box-channel" x="660" y="190" width="100" height="45" rx="6" filter="url(#shadow)" />
  <text class="label" x="710" y="217" text-anchor="middle">Slack</text>

  <rect class="box-channel" x="770" y="190" width="100" height="45" rx="6" filter="url(#shadow)" />
  <text class="label" x="820" y="217" text-anchor="middle">Signal</text>

  <rect class="box-channel" x="660" y="245" width="100" height="45" rx="6" filter="url(#shadow)" />
  <text class="label" x="710" y="272" text-anchor="middle">WhatsApp</text>

  <rect class="box-channel" x="770" y="245" width="100" height="45" rx="6" filter="url(#shadow)" />
  <text class="label" x="820" y="272" text-anchor="middle">iMessage</text>

  <rect class="box-channel" x="660" y="300" width="100" height="45" rx="6" filter="url(#shadow)" />
  <text class="label" x="710" y="327" text-anchor="middle">LINE</text>

  <rect class="box-channel" x="770" y="300" width="100" height="45" rx="6" filter="url(#shadow)" />
  <text class="label" x="820" y="327" text-anchor="middle">Matrix</text>

  <rect class="box-channel" x="660" y="355" width="100" height="45" rx="6" filter="url(#shadow)" />
  <text class="label" x="710" y="382" text-anchor="middle">MS Teams</text>

  <rect class="box-channel" x="770" y="355" width="100" height="45" rx="6" filter="url(#shadow)" />
  <text class="label" x="820" y="382" text-anchor="middle">Web/HTTP</text>

  <rect class="box-secondary" x="660" y="410" width="210" height="45" rx="6" />
  <text class="label" x="765" y="432" text-anchor="middle">Extension Plugins (30+)</text>
  <text class="small" x="765" y="447" text-anchor="middle">Zalo, Voice, LLM Task, etc.</text>

  <!-- External Services (Far Right) -->
  <rect x="930" y="100" width="240" height="180" rx="12" fill="none" class="line-group" />
  <text class="small" x="940" y="118">EXTERNAL SERVICES</text>

  <rect class="box-secondary" x="950" y="135" width="100" height="40" rx="6" />
  <text class="label" x="1000" y="160" text-anchor="middle">Telegram API</text>

  <rect class="box-secondary" x="1060" y="135" width="100" height="40" rx="6" />
  <text class="label" x="1110" y="160" text-anchor="middle">Discord API</text>

  <rect class="box-secondary" x="950" y="185" width="100" height="40" rx="6" />
  <text class="label" x="1000" y="210" text-anchor="middle">Slack API</text>

  <rect class="box-secondary" x="1060" y="185" width="100" height="40" rx="6" />
  <text class="label" x="1110" y="210" text-anchor="middle">WhatsApp</text>

  <rect class="box-secondary" x="1000" y="235" width="120" height="40" rx="6" />
  <text class="label" x="1060" y="260" text-anchor="middle">Other APIs...</text>

  <!-- Agent Layer (Bottom Center) -->
  <rect class="box-agent" x="300" y="520" width="580" height="180" rx="16" filter="url(#shadow)" />
  <text class="heading" x="590" y="550" text-anchor="middle">AI Agent Engine</text>
  <text class="small" x="590" y="568" text-anchor="middle">PI Agent Core integration with tool system</text>

  <rect class="box-secondary" x="320" y="585" width="130" height="50" rx="6" />
  <text class="label" x="385" y="610" text-anchor="middle">Bash Tools</text>
  <text class="small" x="385" y="625" text-anchor="middle">PTY + approvals</text>

  <rect class="box-secondary" x="460" y="585" width="130" height="50" rx="6" />
  <text class="label" x="525" y="610" text-anchor="middle">Browser Tools</text>
  <text class="small" x="525" y="625" text-anchor="middle">Playwright</text>

  <rect class="box-secondary" x="600" y="585" width="130" height="50" rx="6" />
  <text class="label" x="665" y="610" text-anchor="middle">Message Tools</text>
  <text class="small" x="665" y="625" text-anchor="middle">Cross-session</text>

  <rect class="box-secondary" x="740" y="585" width="130" height="50" rx="6" />
  <text class="label" x="805" y="610" text-anchor="middle">Memory Tools</text>
  <text class="small" x="805" y="625" text-anchor="middle">Persistent store</text>

  <rect class="box-secondary" x="320" y="645" width="200" height="45" rx="6" />
  <text class="label" x="420" y="670" text-anchor="middle">Auth Profiles</text>
  <text class="small" x="420" y="683" text-anchor="middle">OpenAI, Anthropic, Bedrock...</text>

  <rect class="box-secondary" x="530" y="645" width="200" height="45" rx="6" />
  <text class="label" x="630" y="670" text-anchor="middle">Agent Scopes</text>
  <text class="small" x="630" y="683" text-anchor="middle">Workspaces, subagents</text>

  <!-- Storage Layer (Bottom Left) -->
  <rect class="box-storage" x="30" y="520" width="220" height="180" rx="12" filter="url(#shadow)" />
  <text class="heading" x="140" y="550" text-anchor="middle">Storage Layer</text>

  <rect class="box-secondary" x="50" y="570" width="180" height="35" rx="6" />
  <text class="label" x="140" y="593" text-anchor="middle">~/.clawdbot/config.json</text>

  <rect class="box-secondary" x="50" y="615" width="180" height="35" rx="6" />
  <text class="label" x="140" y="638" text-anchor="middle">~/.clawdbot/sessions/</text>

  <rect class="box-secondary" x="50" y="660" width="180" height="35" rx="6" />
  <text class="label" x="140" y="683" text-anchor="middle">~/.clawdbot/credentials/</text>

  <!-- LLM Providers (Bottom Right) -->
  <rect x="930" y="520" width="240" height="180" rx="12" fill="none" class="line-group" />
  <text class="small" x="940" y="538">LLM PROVIDERS</text>

  <rect class="box-secondary" x="950" y="555" width="100" height="40" rx="6" />
  <text class="label" x="1000" y="580" text-anchor="middle">OpenAI</text>

  <rect class="box-secondary" x="1060" y="555" width="100" height="40" rx="6" />
  <text class="label" x="1110" y="580" text-anchor="middle">Anthropic</text>

  <rect class="box-secondary" x="950" y="605" width="100" height="40" rx="6" />
  <text class="label" x="1000" y="630" text-anchor="middle">AWS Bedrock</text>

  <rect class="box-secondary" x="1060" y="605" width="100" height="40" rx="6" />
  <text class="label" x="1110" y="630" text-anchor="middle">Google AI</text>

  <rect class="box-secondary" x="950" y="655" width="100" height="40" rx="6" />
  <text class="label" x="1000" y="680" text-anchor="middle">Ollama</text>

  <rect class="box-secondary" x="1060" y="655" width="100" height="40" rx="6" />
  <text class="label" x="1110" y="680" text-anchor="middle">Custom</text>

  <!-- Arrows: Clients to Gateway -->
  <line class="arrow" x1="210" y1="160" x2="295" y2="220" />
  <line class="arrow" x1="210" y1="225" x2="295" y2="250" />
  <line class="arrow" x1="210" y1="290" x2="295" y2="300" />
  <line class="arrow" x1="210" y1="355" x2="295" y2="350" />

  <!-- Arrows: Gateway to Channels -->
  <line class="arrow" x1="580" y1="270" x2="655" y2="210" />
  <line class="arrow" x1="580" y1="320" x2="655" y2="320" />

  <!-- Arrows: Channels to External -->
  <line class="arrow" x1="870" y1="180" x2="945" y2="180" />

  <!-- Arrows: Gateway to Agents -->
  <line class="arrow" x1="440" y1="470" x2="440" y2="515" />

  <!-- Arrows: Gateway to Storage -->
  <line class="arrow-data" x1="300" y1="450" x2="200" y2="515" />

  <!-- Arrows: Agents to LLM -->
  <line class="arrow" x1="880" y1="610" x2="945" y2="610" />

  <!-- Legend -->
  <rect x="40" y="730" width="1120" height="50" rx="8" fill="#f1f5f9" />
  <text class="small" x="60" y="760">Legend:</text>

  <rect x="120" y="745" width="24" height="16" rx="3" fill="#fef3c7" stroke="#d97706" stroke-width="1.5" />
  <text class="small" x="150" y="757">Gateway</text>

  <rect x="220" y="745" width="24" height="16" rx="3" fill="#dbeafe" stroke="#2563eb" stroke-width="1.5" />
  <text class="small" x="250" y="757">Channel Plugin</text>

  <rect x="360" y="745" width="24" height="16" rx="3" fill="#dcfce7" stroke="#16a34a" stroke-width="1.5" />
  <text class="small" x="390" y="757">Agent Engine</text>

  <rect x="490" y="745" width="24" height="16" rx="3" fill="#fce7f3" stroke="#db2777" stroke-width="1.5" />
  <text class="small" x="520" y="757">Storage</text>

  <rect x="590" y="745" width="24" height="16" rx="3" fill="#e0e7ff" stroke="#4f46e5" stroke-width="1.5" />
  <text class="small" x="620" y="757">Client</text>

  <line x1="720" y1="753" x2="760" y2="753" stroke="#94a3b8" stroke-width="2" marker-end="url(#arrowhead)" />
  <text class="small" x="770" y="757">Control Flow</text>

  <line x1="870" y1="753" x2="910" y2="753" stroke="#3b82f6" stroke-width="2" stroke-dasharray="6,4" marker-end="url(#arrowhead-blue)" />
  <text class="small" x="920" y="757">Data Flow</text>
</svg>
